<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Laporan Produksi</title>

    <link rel="stylesheet" href="css/style.css">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
</head>
<body onload="muatAplikasi()">

    <div class="container">
        <h1>üìù Generator Laporan Produksi</h1>

        <div class="form-group">
            <label for="importLaporan">Tempel Laporan Lama untuk Diedit (Opsional)</label>
            <textarea id="importLaporan" rows="7" placeholder="*Update Prj Steril : Cengkeh Tangkai*..."></textarea>
            <button class="secondary-button" onclick="uraiLaporanDariTeks()">Baca & Isi Form dari Teks</button>
        </div>
        <hr>

        <div class="form-group">
            <label for="projectSelect">Project</label>
            <select id="projectSelect" onchange="gantiProyek()"></select>
        </div>
        <div class="button-group-small">
            <button class="utility-button" onclick="tampilkanModalTambahProyek()">Tambah Proyek Baru</button>
            <button class="utility-button danger" onclick="hapusProyek()">Hapus Proyek Terpilih</button>
        </div>
        
        <div class="form-group">
            <label for="tanggalLaporan">Tanggal Laporan</label>
            <input type="date" id="tanggalLaporan">
        </div>

        <div class="form-group">
            <label for="totalSebelumnya">Total Awal (Sebelum Shift Hari Ini)</label>
            <input type="number" id="totalSebelumnya" step="0.01" placeholder="Total dari hari sebelumnya">
        </div>

        <hr>
        <h3 class="add-shift-title">Data Shift Hari Ini</h3>
        <div id="shift-container"></div>

        <div class="button-group">
            <button class="secondary-button" onclick="addShift()">+ Shift Detail</button>
            <button class="secondary-button" onclick="addShiftSimple()">+ Shift Total</button>
        </div>
        
        <button class="secondary-button" onclick="tampilkanRiwayat()">Lihat Riwayat</button>
        <button class="primary-button" onclick="generateReport()">Buat Laporan</button>

        <h2>Hasil Laporan Final</h2>
        <textarea id="hasilLaporan" readonly placeholder="Hasil laporan akan muncul di sini..."></textarea>
        <button class="copy-button" onclick="copyReport()">Salin Teks Laporan</button>
    </div>
    
    <div id="historyModal" class="modal-overlay hidden">
        <div class="modal-content"><div class="modal-header"><h2>Riwayat Laporan</h2><button class="close-btn" onclick="tutupModal('historyModal')">&times;</button></div><div class="modal-body"><div id="historyList"></div><div class="history-detail"><label for="historyDetailText">Detail Laporan Terpilih:</label><textarea id="historyDetailText" readonly></textarea></div></div><div class="modal-footer"><button class="danger-button" onclick="hapusRiwayat()">Hapus Semua Riwayat</button><button class="secondary-button" onclick="tutupModal('historyModal')">Tutup</button></div></div>
    </div>
    <div id="addProjectModal" class="modal-overlay hidden">
        <div class="modal-content-small"><div class="modal-header"><h2>Tambah Proyek Baru</h2><button class="close-btn" onclick="tutupModal('addProjectModal')">&times;</button></div><div class="form-group"><label for="newProjectName">Nama Proyek Baru</label><input type="text" id="newProjectName" placeholder="Contoh: Steril Lada Hitam"></div><div class="modal-footer"><button class="primary-button" onclick="tambahProyek()">Simpan Proyek</button></div></div>
    </div>

    <script src="js/script.js"></script>
</body>
</html>